\documentclass[a4paper,10pt]{article}
\usepackage[brazil]{babel}
\usepackage[latin1]{inputenc}
\begin{document}
\begin{center}
Universidade Federal de Santa Catarina\\
Centro Tecnológico\\
Departamento de Informática e Estatística\\
Bacharelado em Ciências da Computação\\[5cm]
Thiago Leão Moreira\\[5cm]
JMinimizer: Um Compactador de aplicações java.\\[3cm]
Florianópolis (SC)\\[3cm]
2004\\
\end{center}



\begin{section}
Motivação
O crescente números de dispositivos móveis (celulares e PDAs) e a curiosidade em relação a eles, me levaram a aprender a desenvolver programas para a plataforma J2ME. Esta plataforma de desenvolvimento que é um sub conjunto da já consagrada J2SE, oferece mecanismos para a criação de aplicações para dispositivos com pequeno poder de processamento e armazenamento. Além dessa minha curiosidade, a necessidade que a atual empresa em que trabalha em disponibilizar seu software SFA (Sales Force Automation) a maior quantidade de dispositvos e um do nossos problemas em disponibilizar o software é seu tamanha elevado, cerca de 500 kilobytes, me motivaram a desenvolver uma ferramenta que pudesse viabilizar, diminuindo o tamanho da aplicação, a distribuição de aplicações J2ME consideradas grandes para dispositivos que sem o uso dessa ferramenta, não poderiam ser feitas.
\end{section} 
\begin{section}
Descrição da idéia
Atualmente a grande quantidade de biblietocas e frameworks para a linguagem Java facilitam e diminuem o tempo de desenvolvimento de aplicações para esta linguagem. Parsers XML, frameworks de persistenência, bibliotecas de logging, são exemplos de softwares já desenvolvidos e testados que são utilizados em larga escala por outras aplicações Java. No entanto estas bibliotecas e frameworks são projetadas para abrangerem a maior quantidade de situações que um desenvolvedor possa enfretar. Muitas vezes o desenvolvedor não utiliza todos os artifícios que um bibliteca ou fgrameworks oferece, mas o código que não é utlizado também é disponibilizado juntamente com a aplicação final. Isso impacta na hora de usuário do aplicativo efetuar o download ou até impossibilitando a instalação da aplicação por falta de espaço no dispositivo, este último aspecto aplicasse a plataforma J2ME.
Como só parte da biblioteca ou framework será necessária a aplicação, a retirada da código não utilizado diminuiria a tempo de download e apliaria a gama de dispositivos capazes de executar a aplicação.
Uma analise estática do código já compilado da aplicação, poderá nos fornecer as classes, métodos e atributos que realmente fazem parte da aplicação e a partir desses dados eliminar tudo que não vier a ser realmente utilizado na execução do software. Assim gerando um aplicação equivalente, no entanto, menor.
É essa a finalidade do JMinimizer, eliminar tudo que não vier a ser utilizado na execução da aplição.
\end{section}
\begin{section}
Implementação da idéia

Um programa Java pode ter dois tipos de dependência relacionados a bibliotecas e frameworks de terceiros. 
O primerio tipo de dependência está vinculado ao ambiente em que a aplicação depois de pronta será executado, e nesse artigo a identificamos como dependência do tipo \textit{runtime}. Suponhamos que estamos desenvolvendo um aplicativo para dispositivos móveis com suporte a Wireless Message API. Estes dispositivos possuem implementações das classes do pacote javax.wireless.messaging, sendo assim estas classes já estam disponiveis no ambiente de execução, no entanto para a compilação e para a analise estática do código elas são desconhecidas. Para a analise estática é preciso referencia-la, para que quando o JMinimizer começar a analiser a aplicação ele encontre todas as classes e interfaces que são referêncidas no código.
O outro tipo de dependência não está relacionado ao ambiente de execução, no entanto também deve estar presente neste. Esse tipo de dependêcia é criada pelo desenvolvedor quando para solucionar problemas de infra estrutura tipo parsers XML, logging, persistência, este utiliza bibliotecas e/ou frameworks para resolve-los. Como esta dependência não está disponível no ambiente de execução ela deve ser disponibilizada juntamente com a aplicação. Aqui neste artigo a identificamos como dependência do tipo \textit{program}.
Dito isto já entedemos que as dependências do tipo \textit{runtime} não precisam de nenhum tipo de tratamento, já que elas fazem parte do ambiente de execução. Já as dependências do tipo \textit{program} podem e devem ser modificadas para diminuir o tamanho final da aplicação, já que elas devem ser disponibilizadas juntamento com o software.

O arquivo de configuração do JMinimizer possue secções para a devida declaração de quais bibliotecas fazem parte da dependência do tipo \textit{runtime} e do tipo \textit{program}. 

Exemplo de dependêcia do tipo \textit{program}.
	 <programClasspath>
                <directory path="./target/classes"/>
                <fileset directory="./lib">
                        <file name="bcel-5.1.jar"/>
                        <file name="jakarta-regexp-1.3.jar"/>
                        <file name="commons-logging-1.0.3.jar"/>
                        <file name="commons-cli-1.0.jar"/>
                </fileset>
                <fileset directory="./src/test/lib">
                        <file name="commons-lang-1.0.1.jar"/>
                </fileset>
        </programClasspath>

Também no arquivo de configuração é necessário declarar o \textit{entry point} da aplicação. Geralmente o \textit{entry point} é o método main, startApp (para Midlets) ou start (para Applets). Além do método \textit{entry point} também é necessário declarar os métodos que serão chamados pelo ambiente de execução. Exemplo disto são os métodos startApp, pauseApp e destroyApp de um Midlet.

	<class name="net.java.dev.jminimizer.Midlet">
                <method name="startApp">
                        <arguments/>
                        <return>
                		<void/>
                        </return>
                </method>
		<method name="pauseApp">
                        <arguments/>
                        <return>
				<void/>
			</return>
                </method>
		<method name="destroyApp">
                        <arguments>
				<primitiveType name="boolean"/>
			</arguments>
                        <return>
				<void/>
                	</return>
        	</method>
	</class>

\end{section}
\end{document} 
